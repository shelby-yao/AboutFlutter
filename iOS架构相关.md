# iOS架构
### 前言
app的运行无非就是调api-显示界面-跳转-调api-显示界面，达到前后台数据交互实现相关功能（工具类离线app不是）
通过整理，常用的功能为
1. 调用网络api
2. 页面展示
3. 数据的本地化
4. 动态部署方案（iOS专属，由于其审核周期难以预测）

思考
1. 如何让业务开发工程师方便安全地调用网络API？然后尽可能保证用户在各种网络环境下都能有良好的体验？
2. 页面如何组织，才能尽可能降低业务方代码的耦合度？尽可能降低业务方开发界面的复杂度，提高他们的效率？
3. 当数据有在本地存取的需求的时候，如何能够保证数据在本地的合理安排？如何尽可能地减小性能消耗？
4. iOS应用有审核周期，如何能够通过不发版本的方式展示新的内容给用户？如何修复紧急bug？

设计：
一个app的常规功能列举出来的接下来就是分工并确定‘职能部门’的时候了，我们得确定到底有哪些‘部门’，每个部门干哪些事（1.问题分类，模块划分），部门与部门间如何能够密切合作而又不相互耦合（2.确定出单向的依赖关系,设计出模块间交互规范），出现新的工作时，我们需要马上定位到相关部门，不能够模棱两可的感觉貌似A部门B部门都能干这事（3.如果是找不到相关部门可以后期适当添加，但是不能定位模糊，架构具有生长性，也需要在设计之初对未来的业务进行预测），如果是这样那就不是一个好的结构。

实践：
用上述设计中的基础模块堆叠出整个架构，这一步是验证过程，必须吹毛求疵去开发，否则后期调整成本太高。
单元测试、性能测试，优化方案。

### 第一步 去Common
落实到当前iOS现有架构那就是CommonPods与BusinessPods,将他们颗粒化拆分为更小的Pods，
好处
1. 利于新项目或者Demo的快速搭建
2. 利于提升项目编译速度
3. 方便后期具体功能的维护以及升级

### 第二步 View层组织及调用

不够好的View层
1. 代码混乱不规范
2. 过多继承导致的复杂依赖关系
3. 模块化程度不够高，组件粒度不够细
4. 横向依赖
5. 架构设计失去传承

####准则
1.vc中的view初始化放在懒加载/getter中（代码放最后面），viewDidLoad只做添加view及layout相关操作
2.通知注册在viewDidAppear中（注销viewDidDisappear）
3.代码摆放顺序为 life cycle-> delegate-> event response -> getters/setters
4.vc中不应该有private method，多数private method都是类似于数据转化的小功能，可以抽取至工具类/分类或写在vm中（强业务的方法）。